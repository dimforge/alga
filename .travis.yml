sudo: false
language: rust
matrix:
  include:
    - rust: nightly
      env: TEST_SUITE=suite_nightly
    - rust: beta
      env: TEST_SUITE=suite_beta
    - rust: stable
      env: TEST_SUITE=suite_stable
  allow_failures:
    - rust: nightly
    - rust: beta
script:
  - export DIR="$(pwd)"
  - cargo build --verbose
  - cargo test --verbose
  - cd "$DIR/alga" && cargo run --example vectors;
  - if [ "$TRAVIS_RUST_VERSION" == "nightly" ]; then
      cd "$DIR/alga_derive_test" && cargo test --verbose;
    fi
  - cargo install xargo
  - cd "$DIR/alga" && xargo build --no-default-features --target x86_64-unknown-linux-gnu
  - cd "$DIR/alga_derive" && xargo build --no-default-features --target x86_64-unknown-linux-gnu

